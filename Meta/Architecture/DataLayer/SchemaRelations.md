# Schema Relations

> 表关系图

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  characters │────<│relationships│>────│  characters │
└─────────────┘     └─────────────┘     └─────────────┘
       │
       │ appears_in
       ↓
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  chapters   │────<│   volumes   │     │    arcs     │
└─────────────┘     └─────────────┘     └─────────────┘
       │                   │                   │
       │ has               │                   │
       ↓                   ↓                   ↓
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│check_results│     │writing_goals│     │foreshadowing│
└─────────────┘     └─────────────┘     └─────────────┘
       │
       │
       ↓
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│writing_sess.│     │    hooks    │     │   world     │
└─────────────┘     └─────────────┘     └─────────────┘

┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  locations  │     │  factions   │     │timeline_evts│
└─────────────┘     └─────────────┘     └─────────────┘

┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  versions   │     │ embeddings  │     │   config    │
└─────────────┘     └─────────────┘     └─────────────┘
  (所有实体)          (语义搜索)         (项目配置)
```

## 关系说明

| 关系 | 描述 |
|------|------|
| characters ↔ relationships | 多对多，通过 relationships 表连接 |
| chapters → volumes | 多对一，章节属于卷 |
| chapters → arcs | 多对一，章节属于剧情弧 |
| chapters → check_results | 一对多，章节有多个检查结果 |
| factions → characters | 多对一，势力有领导者 |
