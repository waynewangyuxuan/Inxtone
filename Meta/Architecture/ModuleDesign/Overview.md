# Architecture Overview

> 整体架构图

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         Presentation Layer                               │
│  ┌──────────────────────────────┐  ┌──────────────────────────────────┐ │
│  │           TUI                │  │           Web GUI                │ │
│  │      (Ink/React CLI)         │  │        (React + Vite)            │ │
│  └──────────────────────────────┘  └──────────────────────────────────┘ │
│                                    │                                     │
│                              Shared Components                           │
│                         (React 组件，TUI/Web 复用)                        │
└────────────────────────────────────┬────────────────────────────────────┘
                                     │
                              HTTP API / IPC
                                     │
┌────────────────────────────────────┼────────────────────────────────────┐
│                          Service Layer                                   │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────────────┐│
│  │ StoryBible  │ │  Writing    │ │  Quality    │ │      Export         ││
│  │  Service    │ │  Service    │ │  Service    │ │      Service        ││
│  └─────────────┘ └─────────────┘ └─────────────┘ └─────────────────────┘│
│                                    │                                     │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────────────┐│
│  │     AI      │ │   Config    │ │   Search    │ │      Project        ││
│  │   Service   │ │   Service   │ │   Service   │ │      Service        ││
│  └─────────────┘ └─────────────┘ └─────────────┘ └─────────────────────┘│
└────────────────────────────────────┬────────────────────────────────────┘
                                     │
┌────────────────────────────────────┼────────────────────────────────────┐
│                           Data Layer                                     │
│  ┌─────────────────────────────────────────────────────────────────────┐│
│  │                         SQLite Database                              ││
│  │  characters | relationships | world | chapters | check_results | ... ││
│  └─────────────────────────────────────────────────────────────────────┘│
│  ┌─────────────────────────────────────────────────────────────────────┐│
│  │                      Vector Store (sqlite-vss)                       ││
│  └─────────────────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────────────┘
```

## 架构层次

| 层 | 职责 | 技术 |
|---|------|------|
| **Presentation** | 用户交互界面 | Ink (TUI), React (Web) |
| **Service** | 业务逻辑处理 | TypeScript Classes |
| **Data** | 持久化存储 | SQLite, sqlite-vss |
